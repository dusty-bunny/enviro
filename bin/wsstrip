#!/bin/bash -x


strip_srcs()
{
        for file in "$@" ; do
                if [ ${file%%.c} == $file -a ${file%%.h} == $file ] ; then
                        echo "Skipping $file"
                        continue
                fi
                sed -i -e 's/[ 	]\+$//' $file
        done
}

strip_ascii()
{
        while read file ; do
                [ ! -f $file ] && continue
                file $file | grep -i elf >/dev/null 2>&1 && continue
                file $file | grep -i text >/dev/null || continue
                [ "$(basename $0)" == "$(basename $file)" ] && echo ======== && continue
        sed -i -e 's/[ ]\+$//' -e 's/^[ ]\+	/	/' $file && echo "Process: $file"
        done
}

# strip_ascii
strip_srcs "$@"
